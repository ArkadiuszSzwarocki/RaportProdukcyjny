<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logowanie - AgroNetzwerk</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- Favicon -->
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/static/favicon.ico">
    <style>
        .language-selector-container {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
        }
        
        #language-selector {
            padding: 5px 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        .btn-login {
            display: block;
            margin: 20px auto 0 !important;
            padding: 8px 24px !important;
            font-size: 14px !important;
            width: auto !important;
        }
    </style>
</head>
<body class="login-page">

<!-- Language selector -->
<div class="language-selector-container">
    <label for="language-selector" class="sr-only">language</label>
    <select id="language-selector" onchange="changeLanguage(this.value)" title="Select language">
        <option value="pl">Polski</option>
        <option value="uk">Українська</option>
        <option value="en">English</option>
    </select>
</div>

<div class="login-page-body">
<div class="login-card">
    <!-- Use local static logo to avoid external requests and improve availability -->
    <img src="/static/agro_logo.png" alt="AgroNetzwerk" class="login-logo">

    <h2 class="header-title m-0">Zaloguj się</h2>

    
        
    

    <form method="POST">
        <div class="form-group">
            <label for="login" class="form-label">Login</label>
            <input type="text" id="login" name="login" class="form-input" placeholder="Wpisz login" required aria-label="Login">
        </div>
        <div class="form-group">
            <label for="haslo" class="form-label">Hasło</label>
            <input type="password" id="haslo" name="haslo" class="form-input" placeholder="Wpisz hasło" required aria-label="Hasło">
        </div>
        <button type="submit" class="btn-login">Wejdź</button>
    </form>

    </div>
    </div>

<script>
function changeLanguage(lang) {
    // Ustaw cookie na 365 dni
    const d = new Date();
    d.setTime(d.getTime() + (365*24*60*60*1000));
    const expires = "expires="+ d.toUTCString();
    document.cookie = "app_language=" + lang + ";" + expires + ";path=/";
    
    // Refresh strony z ?lang= parametrem
    window.location.href = window.location.pathname + "?lang=" + lang;
}

// Ustawiamy selektor na domyślny się wybrany język z cookie
window.addEventListener('DOMContentLoaded', function() {
    const langSelector = document.getElementById('language-selector');
    if (langSelector) {
        // Czytaj język z URL lub cookie
        const urlParams = new URLSearchParams(window.location.search);
        const langParam = urlParams.get('lang');
        const langCookie = document.cookie.split('; ').find(row => row.startsWith('app_language='));
        const currentLang = langParam || (langCookie ? langCookie.split('=')[1] : 'pl');
        
        langSelector.value = currentLang;
    }
});
</script>
</body>
</html>