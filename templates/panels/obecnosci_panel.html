<div class="section-box">
  <h3>ðŸ“… Ostatnie NieobecnoÅ›ci (30 dni)</h3>
  {% if recent_absences and recent_absences|length > 0 %}
  <table class="table compact">
    <thead><tr><th>Pracownik</th><th>Typ</th><th>Data</th><th>Godziny</th><th>Komentarz</th></tr></thead>
    <tbody>
      {# Group by 'data' (expects recent_absences ordered by date desc) #}
      {% for group in recent_absences|groupby('data') %}
      <tr class="date-row"><td colspan="5">{{ group.grouper }}</td></tr>
        {% for r in group.list %}
        <tr>
          <td>{{ r.pracownik }}</td>
          <td>{{ r.typ }}</td>
          <td>{{ r.data }}</td>
          <td>{{ r.godziny or '' }}</td>
          <td>{{ r.komentarz or '' }}</td>
        </tr>
        {% endfor %}
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>Brak wpisÃ³w z ostatnich 30 dni.</p>
  {% endif %}
</div>
